= Goroutines

Lightweight concurrency +
[.medium]#but not free#

:fn-stack-1: https://github.com/golang/go/blob/f296b7a6f045325a230f77e9bda1470b1270f817/src/runtime/stack.go#L72-L83[L72]
:fn-stack-2: https://github.com/golang/go/blob/go1.19.1/src/runtime/stack.go#L1479-L1483[L1479]

[.small]
Each goroutine costs *at least* 2 KB footnote:[runtime/stack.go {fn-stack-1}, {fn-stack-2}]

[.notes]
--
First, let's talk about goroutines.

We all know and love goroutines.
They're lightweight, much more lightweight than threads.

But they're not free.

On top of the runtime cost, each goroutine costs *at least* 2 kB.
Starting Go 1.19, it can be higher -- based on the size your program's
goroutines grow to on average.

So let's discuss a couple best practices with goroutines.
--

include::practices-goroutines-lifetime.adoc[leveloffset=+1]
include::practices-goroutines-pool.adoc[leveloffset=+1]
